<h4 class="border-bottom">Product Offers</h4>
<form class="form-horizontal" method="POST">
    <div class="form-group">
        <label class="control-label">Select Product</label>
        <input [(ngModel)]="offer.productID" name="searchTxt"
       typeaheadOptionField="id"
       [typeahead]="productsList$"
       [typeaheadAsync]="true"
       class="form-control"
       [typeaheadItemTemplate]="customItemTemplate"
       placeholder="Enter Product Title">
    </div>
    <div class="form-group">
        <label class="control-label">Start DateTime:<br /></label>
        <div class="form-inline">
            <input type="datetime-local" [(ngModel)]="offer.start" name="startDate">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label">End DateTime</label>
        <div class="form-inline">
            <input type="datetime-local" [(ngModel)]="offer.end" name="endDate">
        </div>        
    </div>
    <div class="form-group">
        <label class="control-label">Offer Price</label>
        <div class="form-inline">
            <input type="text" class="form-control" [(ngModel)]="offer.price" name="price">
        </div>        
    </div>
    <button class="btn btn-success form-control" type="button" (click)="addOffer()">Add Offer</button>
</form>
<div *ngFor="let product of productsList" class="productsList">
    <div class="row">
        <div class="col-4">
            <img src="https://www.mdcart.in/upload/{{product.image}}" />
        </div>
        <div class="col-8">
            <h6 class="ellipsisText m-0">{{ escapeChars(product.title) }}</h6>
            <div class="row">
                <div class="col-5"><b>₹ {{ product.price }}</b></div>
                <div class="col-7 small text-right"></div>
            </div>
            <div class="table-responsive">
                <table class="table table-condensed small text-muted mb-0">
                    <tr>
                        <th class="p-0 text-uppercase">Shipping</th>
                        <th class="p-0">Returns</th>
                    </tr>
                    <tr>
                        <td class="p-0">
                            <span *ngIf="product.free_shipping" class="text-success"><i class="fas fa-check-circle"></i>
                                Free</span>
                            <span *ngIf="!product.free_shipping" class="text-danger"><i class="fas fa-times-circle"></i>
                                Extra</span>
                        </td>
                        <td class="p-0">
                            <span *ngIf="product.returns" class="text-success"><i class="fas fa-check-circle"></i>
                                Free</span>
                            <span *ngIf="!product.returns" class="text-danger"><i class="fas fa-times-circle"></i> Not
                                Available</span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<ng-template #customItemTemplate let-model="item" let-index="index">
    <div class="row" style="width: 400px">
        <div class="col-3 p-0 pr-1"><img src="https://www.mdcart.in/upload/{{model.image}}" width="80" height="100" /></div>
        <div class="col-9 p-0">
            <h6 class="ellipsisText m-0">{{ model.title }}</h6>
            <div class="row">
                <div class="col-5"><b>₹ {{ model.price }}</b></div>
            </div>
        </div>
    </div>
</ng-template>
